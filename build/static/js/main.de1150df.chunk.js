(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(23),o=n.n(c),s=n(10),i=n(111),u=n(1),l=function(){var e=Object(s.c)((function(e){return e.notification}));return"Wrong credentials"===e||"Bad request"===e?Object(u.jsx)(i.a,{id:"errorMessage",variant:"danger",children:e}):null!==e?Object(u.jsx)(i.a,{id:"successMessage",variant:"success",children:e}):Object(u.jsx)("div",{})},d=n(12),j=n(26),b=n(117),p=function(e){var t=e.blogs,n=0,r=Object(d.f)(),a={cursor:"pointer",color:"#007bff",textDecoration:"none",backgroundColor:"transparent"};return Object(u.jsxs)(j.a,{children:[Object(u.jsx)("h2",{style:{fontFamily:"CopperPlate",Color:"Grey"},children:"Blogs"}),Object(u.jsx)(b.a,{children:t.map((function(e){return n+=1,Object(u.jsx)(b.a.Item,{children:Object(u.jsx)("a",{style:a,onClick:function(){return r.push("/blogs/".concat(e.id))},children:e.title})},n)}))})]})},f=function(){var e=Object(s.c)((function(e){return e.blog}));return e.sort((function(e,t){return e.likes-t.likes})),Object(u.jsx)(p,{blogs:e})},h=n(6),O=n.n(h),g=n(11),x=n(8),m=n(31),v=n.n(m),y=function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post("/api/login",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w={login:y},k="/api/blogs",B=null,C=function(){var e=Object(g.a)(O.a.mark((function e(){var t;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get(k,{headers:{Authorization:B}});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.get("".concat(k,"/").concat(t),{headers:{Authorization:B}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.a.post(k,t,{headers:{Authorization:B}});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(g.a)(O.a.mark((function e(t,n){var r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,v.a.post("".concat(k,"/").concat(n,"/comments"),{comments:t},{headers:{Authorization:B}});case 3:return r=e.sent,console.log(r.data),e.abrupt("return",r.data);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A=function(){var e=Object(g.a)(O.a.mark((function e(t){var n,r,a;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r={user:t.user.id,title:t.title,author:t.author,url:t.url,likes:JSON.stringify(t.likes+1)},e.next=4,v.a.put("".concat(k,"/").concat(n),r,{headers:{Authorization:B}});case 4:return a=e.sent,e.abrupt("return",a.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,v.a.delete("".concat(k,"/").concat(n),{headers:{Authorization:B}});case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I={getAll:C,getBlogsFromId:S,setToken:function(e){B="bearer ".concat(e)},postBlog:N,changeblog:A,deleteblog:L,commentblog:U},T=0,z=function(e){return clearTimeout(T),function(){var t=Object(g.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:"SetNotification",data:e}),t.next=3,new Promise((function(e){T=setTimeout(e,5e3)}));case 3:n({type:"SetNotification",data:null});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;return"SetNotification"===t.type?t.data:e},F=function(e,t){return function(){var n=Object(g.a)(O.a.mark((function n(r){var a;return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,w.login({username:e,password:t});case 3:a=n.sent,window.localStorage.setItem("loggedBlogUser",JSON.stringify(a)),I.setToken(a.token),r({type:"LoginUser",data:a}),r(z("".concat(e," has successfully logged in"))),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(0),r(z("Wrong credentials"));case 13:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LoginUser":return t.data;case"LogoutUser":return null;default:return e}},D=n(115),P=n(112),J=function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(x.a)(c,2),i=o[0],l=o[1],d=Object(s.b)(),j=function(){var e=Object(g.a)(O.a.mark((function e(t){return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),d(F(n,i));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)(D.a,{onSubmit:j,children:[Object(u.jsx)("h2",{style:{color:"Blue",fontFamily:"Monaco",margin:"10px"},id:"loginTitle",children:"Login to Application"}),Object(u.jsxs)(D.a.Group,{className:"mb-3",children:[Object(u.jsx)(D.a.Label,{children:" Username "}),Object(u.jsx)(D.a.Control,{id:"usernameInput",type:"text",value:n,placeholder:"Enter Username",name:"Username",onChange:function(e){var t=e.target;return a(t.value)}})]}),Object(u.jsxs)(D.a.Group,{className:"mb-3",children:[Object(u.jsx)(D.a.Label,{children:"Password"}),Object(u.jsx)(D.a.Control,{id:"passwordInput",type:"password",value:i,placeholder:"Enter Password",name:"Password",onChange:function(e){var t=e.target;return l(t.value)}})]}),Object(u.jsx)(P.a,{variant:"primary",type:"submit",id:"loginSubmit",children:"Login"})]})},q=n(34),M=n(2),W=function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n({type:"IncreaseVote",data:e}),n(z("".concat(e.title," has been liked"))),t.next=5,I.changeblog(e);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),n(z("Bad request"));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},V=function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("Do you really want to delete this blog?")){t.next=12;break}return t.prev=1,n(z("".concat(e.title," has been deleted"))),n({type:"DeleteBlog",data:e}),t.next=6,I.deleteblog(e);case 6:t.next=12;break;case 8:t.prev=8,t.t0=t.catch(1),console.log(t.t0),n(z("Bad request"));case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},H=function(e,t){return function(){var n=Object(g.a)(O.a.mark((function n(r){return O.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:"CommentBlog",data:{comment:e,id:t}}),r(z("".concat(e," has been added"))),n.next=4,I.commentblog(e,t);case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()},R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"IncreaseVote":var n=t.data.id,r=e.find((function(e){return e.id===n})),a=Object(M.a)(Object(M.a)({},r),{},{likes:r.likes+=1}),c=Object(q.a)(e);return c.map((function(e){return e.id!==n?e:a})),console.log(c),c;case"DeleteBlog":var o=e.indexOf(t.data),s=Object(q.a)(e);return s.splice(o,o+1),s;case"AddedBlog":return console.log([].concat(Object(q.a)(e),[t.data])),[].concat(Object(q.a)(e),[t.data]);case"InitBlogs":case"GetBlogsFromId":return t.data;case"CommentBlog":var i=t.data.id,u=e.find((function(e){return e.id===i})),l=Object(M.a)(Object(M.a)({},u),{},{comments:u.comments.push(t.data.comment)}),d=Object(q.a)(e);return d.map((function(e){return e.id!==i?e:l})),d;default:return e}},K=function(e){var t=e.addBlog,n=e.newBlogTitle,r=e.setNewBlogTitle,a=e.newBlogAuthor,c=e.setNewBlogAuthor,o=e.newBlogUrl,s=e.setNewBlogUrl;return Object(u.jsxs)(D.a,{onSubmit:t,children:[Object(u.jsx)("h2",{style:{fontFamily:"CopperPlate",Color:"Grey"},children:"create new "}),Object(u.jsxs)(D.a.Group,{className:"mb-3",children:[Object(u.jsx)(D.a.Label,{children:" Title:"}),Object(u.jsx)(D.a.Control,{id:"Title",type:"text",value:n,placeholder:"Enter Blog Title",name:"Title",onChange:function(e){var t=e.target;return r(t.value)}})]}),Object(u.jsxs)(D.a.Group,{className:"mb-3",children:[Object(u.jsx)(D.a.Label,{children:"Author:"}),Object(u.jsx)(D.a.Control,{id:"Author",type:"text",value:a,placeholder:"Enter Blog's Author",name:"Author",onChange:function(e){var t=e.target;return c(t.value)}})]}),Object(u.jsxs)(D.a.Group,{className:"mb-3",children:[Object(u.jsx)(D.a.Label,{children:"Url:"}),Object(u.jsx)(D.a.Control,{id:"Url",type:"text",value:o,placeholder:"Enter Blog's Url",name:"Url",onChange:function(e){var t=e.target;return s(t.value)}})]}),Object(u.jsx)(P.a,{id:"SubmitButton",type:"submit",children:"Submit"})]})},Q=function(){var e=Object(r.useState)(""),t=Object(x.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)(""),o=Object(x.a)(c,2),i=o[0],l=o[1],d=Object(r.useState)(""),j=Object(x.a)(d,2),b=j[0],p=j[1],f=Object(s.b)();return Object(u.jsx)(K,{addBlog:function(e){e.preventDefault();var t={title:n,author:i,url:b};f(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,I.postBlog(e);case 3:r=t.sent,console.log(r),n({type:"AddedBlog",data:r}),n(z("".concat(e.title," by ").concat(e.author," has successfully been added"))),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),n(z("Bad request"));case 12:case"end":return t.stop()}}),t,null,[[0,9]])})));return function(e){return t.apply(this,arguments)}}()}(t),z(t)),a(""),l(""),p("")},newBlogTitle:n,setNewBlogTitle:a,newBlogAuthor:i,setNewBlogAuthor:l,newBlogUrl:b,setNewBlogUrl:p})},X=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login.username}));return Object(u.jsx)("div",{children:Object(u.jsxs)("div",{style:{color:"white"},children:[t," is logged in ",Object(u.jsx)(P.a,{size:"sm",onClick:function(t){t.preventDefault(),window.localStorage.setItem("loggedBlogUser",null),e((function(e){e({type:"LogoutUser",data:null})}))},children:"Logout"})]})})},Y=function(){var e=Object(d.g)().id,t=0,n=Object(s.b)();Object(r.useEffect)((function(){n(function(e){return function(){var t=Object(g.a)(O.a.mark((function t(n){var r;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,I.getBlogsFromId(e);case 2:r=t.sent,n({type:"GetBlogsFromId",data:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(e))}),[e]);var a=Object(s.c)((function(e){return e.blog}));a.sort((function(e,t){return e.likes-t.likes}));return 0===a.length?null:Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{style:{fontFamily:"CopperPlate"},children:a[0].user.name}),Object(u.jsx)("div",{children:Object(u.jsx)("strong",{children:"added blogs"})}),Object(u.jsx)(b.a,{children:a.map((function(e){return t+=1,Object(u.jsx)(b.a.Item,{children:e.title},t)}))})]})},Z=function(){var e=Object(s.b)(),t=Object(r.useState)(""),n=Object(x.a)(t,2),a=n[0],c=n[1],o=Object(s.c)((function(e){return e.blog})),i=Object(d.g)().id,l=o.find((function(e){return e.id===i})).comments,j=0,p=function(){var t=Object(g.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n.preventDefault(),e(H(a,i)),c("");case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)("div",{children:[Object(u.jsx)(D.a,{onSubmit:p,children:Object(u.jsxs)(D.a.Group,{className:"mb-3",children:[Object(u.jsx)(D.a.Control,{id:"Comment",type:"text",value:a,placeholder:"Enter a Comment",name:"Comment",onChange:function(e){var t=e.target;return c(t.value)}}),Object(u.jsx)(P.a,{size:"sm",id:"SubmitButton",type:"submit",children:"Submit"})]})}),Object(u.jsx)(b.a,{children:l.map((function(e){return e?(j++,Object(u.jsx)(b.a.Item,{children:e},j)):null}))})]})},$=function(){console.log("test");var e=Object(s.b)(),t=Object(s.c)((function(e){return e.blog})),n=Object(d.g)().id,r=t.find((function(e){return e.id===n})),a=function(){var t=Object(g.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(W(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),c=function(){var t=Object(g.a)(O.a.mark((function t(n){return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(V(n));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),o=window.localStorage.getItem("loggedBlogUser"),i=JSON.parse(o),l={fontFamily:"CopperPlate",Color:"Grey"};return r&&0!==t.length?Object(u.jsxs)("div",{children:[Object(u.jsxs)("div",{id:r.title,style:{paddingTop:10,paddingLeft:2,borderWidth:1,marginBottom:5},children:[Object(u.jsx)("h2",{style:l,children:r.title}),Object(u.jsx)("a",{href:r.url,children:r.url}),Object(u.jsx)("div",{id:"like",children:Object(u.jsxs)("div",{id:"numberofLikes",children:["likes ",r.likes,Object(u.jsx)(P.a,{size:"sm",variant:"outline-primary",id:"likeButton",onClick:function(){return a(r)},children:"like"})]})}),Object(u.jsxs)("div",{children:["added by ",r.user.username]}),Object(u.jsxs)("div",{children:[" ",i.username===r.user.username?Object(u.jsx)(P.a,{variant:"outline-primary",size:"sm",id:"remove",onClick:function(){return c(r)},children:"remove"}):Object(u.jsx)("div",{})]})]}),Object(u.jsx)("h2",{style:l,children:"Comments"}),Object(u.jsx)(Z,{})]}):null},_=a.a.forwardRef((function(e,t){var n=Object(r.useState)(!1),a=Object(x.a)(n,2),c=a[0],o=a[1],s={display:c?"none":""},i={display:c?"":"none"};return Object(u.jsxs)("div",{children:[Object(u.jsx)("div",{style:s,children:Object(u.jsx)(P.a,{size:"sm",id:"CreateNewBlog",onClick:function(){return o(!0)},children:e.buttonLabel})}),Object(u.jsxs)("div",{style:i,children:[e.children,Object(u.jsx)(P.a,{size:"sm",variant:"secondary",onClick:function(){return o(!1)},children:"cancel"})]})]})}));_.displayName="ToggleComponent";var ee=_,te=function(e){var t=e.listofusers,n=0,r=Object(d.f)(),a={cursor:"pointer",color:"#007bff",textDecoration:"none",backgroundColor:"transparent"};return Object(u.jsx)(j.a,{children:Object.entries(t).map((function(e){var t=Object(x.a)(e,2),c=t[0],o=t[1];return n+=1,Object(u.jsxs)("div",{style:a,onClick:function(){return r.push("/users/".concat(o.id))},children:[c," ",o.blogs]},n)}))})},ne=function(){var e=Object(s.c)((function(e){return e.blog})),t={};e.forEach((function(e){e.user.name in t?t[e.user.name].blogs+=1:t[e.user.name]={id:e.user.id,blogs:1}}));return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{style:{fontFamily:"CopperPlate"},children:"Users"}),Object(u.jsx)("div",{children:Object(u.jsx)("strong",{children:"blogs created"})}),Object(u.jsx)(te,{listofusers:t})]})},re=n(114),ae=n(113),ce=n(116),oe=function(){var e=Object(s.b)(),t=Object(s.c)((function(e){return e.login}));Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogUser"),n=JSON.parse(t);n&&e(function(e){return function(t){e&&(I.setToken(e.token),t({type:"LoginUser",data:e}))}}(n))}),[e]),Object(r.useEffect)((function(){var t=window.localStorage.getItem("loggedBlogUser");null!==JSON.parse(t)&&e(function(){var e=Object(g.a)(O.a.mark((function e(t){var n;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I.getAll();case 2:n=e.sent,t({type:"InitBlogs",data:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[t]);return Object(u.jsxs)("div",{className:"container",children:[Object(u.jsx)(l,{}),null===t?Object(u.jsx)(J,{}):Object(u.jsxs)(j.a,{children:[Object(u.jsx)(re.a,{bg:"dark",expand:"lg",children:Object(u.jsxs)(ae.a,{children:[Object(u.jsx)(re.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(u.jsx)(re.a.Collapse,{id:"basic-navbar-nav",children:Object(u.jsxs)(ce.a,{children:[Object(u.jsx)(ce.a.Link,{href:"#",as:"span",children:Object(u.jsx)(j.b,{to:"/",children:"Home "})}),Object(u.jsx)(ce.a.Link,{href:"#",as:"span",children:Object(u.jsx)(j.b,{to:"/users",children:"Users "})}),Object(u.jsx)(ce.a.Link,{children:Object(u.jsx)(X,{})})]})})]})}),Object(u.jsx)("h2",{style:{color:"grey",backgroundColor:"beige",fontFamily:"Lucida Console",marginTop:"20px",marginBottom:"20px",textAlign:"center",fontSize:"40px"},children:"Blog App"}),Object(u.jsxs)(d.c,{children:[Object(u.jsx)(d.a,{path:"/blogs/:id",children:Object(u.jsx)($,{})}),Object(u.jsx)(d.a,{path:"/users/:id",children:Object(u.jsx)(Y,{})}),Object(u.jsx)(d.a,{path:"/users",children:Object(u.jsx)(ne,{})}),Object(u.jsxs)(d.a,{path:"/",children:[Object(u.jsx)(ee,{buttonLabel:"create new blog",children:Object(u.jsx)(Q,{})}),Object(u.jsx)(f,{})]})]})]})]})},se=n(54),ie=n(73),ue=Object(se.b)({notification:E,blog:R,login:G}),le=Object(se.c)(ue,Object(se.a)(ie.a));o.a.render(Object(u.jsx)(s.a,{store:le,children:Object(u.jsx)(oe,{})}),document.getElementById("root"))}},[[109,1,2]]]);
//# sourceMappingURL=main.de1150df.chunk.js.map